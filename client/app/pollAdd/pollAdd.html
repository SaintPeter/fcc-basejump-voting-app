<div ng-include="'components/navbar/navbar.html'"></div>

<div class="col-md-12">
    <form>
      <div class="form-group">
        <label>Question:</label>
        <input name="question" type="text" placeholder="Enter your Question" ng-model="newPoll.question"></input>
        <div class="form-group" ng-repeat="option in newPoll.options">
            <div class="form-group">
              <label>Option {{ option.id + 1 }}</label>
              <input name="text" type="text" placeholder="Poll Option" ng-model="option.text">
              <button ng-hide="$first" class="btn btn-danger btn-xs" ng-click="deleteOption(option.id)"><i class="fa fa-minus fa-xs"></i></button>
            </div>
        </div>
        <button class="btn btn-success btn-xs" title="Add Poll Option" ng-click="addOption()"><i class="fa fa-plus fa-xs"></i></button>
      </div>
      <button class="btn btn-primary" ng-click="addPoll()">Save</button>

    </form>
    <h2>Polls:</h2>
    <div class="col-md-4" ng-repeat="poll in polls">
        <div  class="panel panel-default" ng-if="voted(poll)" ng-animate="'if'">
          <div class="panel-heading heading-custom-poll" ng-click="toggleExpand(poll)">
            <h3 class="panel-title">
                <span class="totalVotes pull-left" ng-class="{voted: voted(poll)}"> {{ poll.totalVotes }} </span>
                {{ poll.question }}
                <button ng-show="pollOwner(poll)" class="btn btn-danger btn-xs pull-right" confirm="Are you sure you want to delete this poll?" ng-click="deletePoll(poll)">
                  <i class="fa fa-minus fa-xs"></i>
                </button>
                <br /><a class="author" href="#"> {{ poll.owner_name }} </a>
            </h3>
          </div>
          <div class="panel-body poll-body slide" ng-show="expanded(poll)">
            <canvas id="doughnut" class="chart chart-doughnut" data="poll.chartData" labels="poll.chartLabels" legend="true"></canvas>
          </div>
        </div>
        <div class="panel panel-default" ng-if="!voted(poll)">
          <div class="panel-heading heading-custom-poll" ng-click="toggleExpand(poll)">
            <h3 class="panel-title">
              <span class="totalVotes pull-left" ng-class="{voted: voted(poll)}"> {{ (poll.totalVotes) ? poll.totalVotes : 0  }} </span>
              {{ poll.question }}
              <button ng-show="pollOwner(poll)" class="btn btn-danger btn-xs pull-right" confirm="Are you sure you want to delete this poll?" ng-click="deletePoll(poll)">
                <i class="fa fa-minus fa-xs"></i>
              </button>
              <br /><a class="author" href="#"> {{ poll.owner_name }} </a>
            </h3>
          </div>
          <div class="panel-body poll-body slide" ng-show="expanded(poll)">
            <ul ng-repeat="option in poll.options">
              <li>{{ option.text }} <button class="btn btn-info btn-xs" ng-click="doVote(poll, option)">Vote</button></li>
            </ul>
          </div>
        </div>
    </div>
</div>
